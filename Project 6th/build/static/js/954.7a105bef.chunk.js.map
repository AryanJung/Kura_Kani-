{"version":3,"file":"static/js/954.7a105bef.chunk.js","mappings":"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","sources":["components/NewsCard.tsx","pages/Home.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface NewsArticle {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  url: string;\r\n  source: string;\r\n  publishedAt: string;\r\n  summary?: string;\r\n  cluster?: number;\r\n  imageUrl?: string;\r\n}\r\n\r\ninterface NewsCardProps {\r\n  article: NewsArticle;\r\n  highlightSummary?: boolean;\r\n}\r\n\r\nconst NewsCard: React.FC<NewsCardProps> = ({ article, highlightSummary }) => {\r\n  return (\r\n    <div\r\n      className=\"w-full h-80 relative bg-white rounded-xl shadow-lg p-6 flex flex-col justify-between hover:shadow-2xl transition-shadow border border-blue-100\"\r\n    >\r\n      <div>\r\n        <h3 className=\"text-xl font-bold text-gray-800 mb-2 text-center\">{article.title}</h3>\r\n        <div className=\"flex justify-between items-center mb-2\">\r\n          <span className=\"text-xs text-gray-400\">{article.source}</span>\r\n          <span className=\"text-xs text-gray-400\">{new Date(article.publishedAt).toLocaleDateString()}</span>\r\n        </div>\r\n        {highlightSummary && article.summary && (\r\n          <div className=\"mt-4 p-4 bg-blue-50 border-l-4 border-blue-400 rounded relative\">\r\n            <span className=\"absolute -top-3 left-2 bg-blue-400 text-white text-xs px-2 py-0.5 rounded shadow\">Summary</span>\r\n            <p className=\"text-gray-700 text-sm mt-2 whitespace-pre-line\">{article.summary}</p>\r\n          </div>\r\n        )}\r\n        {!highlightSummary && article.summary && (\r\n          <p className=\"text-gray-700 text-sm mt-2 whitespace-pre-line\">{article.summary}</p>\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end mt-4\">\r\n        <a\r\n          href={article.url}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:underline font-semibold\"\r\n        >\r\n          Read More\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Add CSS for hover effect in a style tag\r\nconst styles = `\r\n  .news-card-inner:hover {\r\n    transform: rotateY(180deg);\r\n  }\r\n`;\r\n\r\n// Inject styles into the document\r\nconst styleSheet = document.createElement('style');\r\nstyleSheet.innerText = styles;\r\ndocument.head.appendChild(styleSheet);\r\n\r\nexport default NewsCard;","import React, { useState, useEffect } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios';\r\nimport NewsCard from '../components/NewsCard';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { getUserPreferences } from '../services/api';\r\nimport PreferencesModal from '../components/PreferencesModal';\r\n\r\ninterface NewsArticle {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  url: string;\r\n  source: string;\r\n  publishedAt: string;\r\n  summary?: string;\r\n  category?: string;\r\n}\r\n\r\ninterface NewsResponse {\r\n  articles: NewsArticle[];\r\n  total: number;\r\n  page: number;\r\n  limit: number;\r\n  totalPages: number;\r\n}\r\n\r\ninterface HomeProps {\r\n  filters: {\r\n    entertainment: boolean;\r\n    sports: boolean;\r\n    crime: boolean;\r\n    politics: boolean;\r\n  };\r\n  searchQuery?: string;\r\n}\r\n\r\nconst Home: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [page, setPage] = useState(1);\r\n  const [showPreferences, setShowPreferences] = useState(false);\r\n  const limit = 10;\r\n\r\n  // Get user preferences or empty array\r\n  const preferences = user ? getUserPreferences(user.username) : [];\r\n\r\n  // If user is logged in and has no preferences, prompt for them\r\n  useEffect(() => {\r\n    if (user && preferences.length === 0) {\r\n      setShowPreferences(true);\r\n    }\r\n  }, [user, preferences]);\r\n\r\n  const { data, isLoading, error } = useQuery<NewsResponse>(\r\n    ['news', preferences, page],\r\n    async () => {\r\n      const response = await axios.get('http://localhost:8000/api/news', {\r\n        params: {\r\n          categories: preferences.length > 0 ? preferences.join(',') : undefined,\r\n          page,\r\n          limit,\r\n        },\r\n      });\r\n      const originalArticles = response.data.articles;\r\n      if (!originalArticles || originalArticles.length === 0) {\r\n        return {\r\n          articles: [],\r\n          total: 0,\r\n          page,\r\n          limit,\r\n          totalPages: 0,\r\n        };\r\n      }\r\n      // Prepare texts for summarization\r\n      const articleTexts = originalArticles.map((article: NewsArticle) => \r\n        article.description !== \"No description available\" ? article.description : article.title\r\n      );\r\n      const res = await axios.post('http://localhost:8000/summarize', {\r\n        texts: articleTexts,\r\n      });\r\n      const summaryResults = res.data.results || [];\r\n      const articlesWithSummaries = originalArticles.map((article: NewsArticle, idx: number) => ({\r\n        ...article,\r\n        summary: summaryResults[idx]?.summary || \"Unable to generate summary\",\r\n      }));\r\n      return {\r\n        ...response.data,\r\n        articles: articlesWithSummaries,\r\n      };\r\n    },\r\n    {\r\n      retry: 1,\r\n      staleTime: 5 * 60 * 1000,\r\n    }\r\n  );\r\n\r\n  const filteredArticles = data?.articles || [];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || filteredArticles.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-gray-700 mb-4 text-xl\">\r\n          {error ? \"Error loading news or summaries. Please try again later.\" : \"No articles found for your preferences.\"}\r\n        </div>\r\n        <button onClick={() => window.location.reload()} className=\"bg-blue-600 text-white px-4 py-2 rounded font-semibold hover:bg-blue-700 transition\">\r\n          Retry\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"my-8\">\r\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-8\">Latest News</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full\">\r\n        {filteredArticles.map((article) => (\r\n          <NewsCard key={article.id} article={article} highlightSummary />\r\n        ))}\r\n      </div>\r\n      <div className=\"flex justify-center gap-4 mt-8\">\r\n        <button\r\n          className={`bg-gray-200 text-gray-700 px-4 py-2 rounded ${page === 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-300'}`}\r\n          disabled={page === 1}\r\n          onClick={() => setPage(page - 1)}\r\n        >\r\n          Previous\r\n        </button>\r\n        <span className=\"leading-8\">Page {data?.page || 1} of {data?.totalPages || 1}</span>\r\n        <button\r\n          className={`bg-gray-200 text-gray-700 px-4 py-2 rounded ${page === (data?.totalPages || 1) ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-300'}`}\r\n          disabled={page === (data?.totalPages || 1)}\r\n          onClick={() => setPage(page + 1)}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n      {showPreferences && (\r\n        <PreferencesModal onClose={() => setShowPreferences(false)} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;"],"names":["styleSheet","document","createElement","innerText","head","appendChild","_ref","article","highlightSummary","_jsxs","className","children","_jsx","title","source","Date","publishedAt","toLocaleDateString","summary","href","url","target","rel","Home","user","useAuth","page","setPage","useState","showPreferences","setShowPreferences","preferences","getUserPreferences","username","useEffect","length","data","isLoading","error","useQuery","async","response","axios","get","params","categories","join","undefined","limit","originalArticles","articles","total","totalPages","articleTexts","map","description","summaryResults","post","texts","results","articlesWithSummaries","idx","_summaryResults$idx","_objectSpread","retry","staleTime","filteredArticles","onClick","window","location","reload","NewsCard","id","concat","disabled","PreferencesModal","onClose"],"sourceRoot":""}